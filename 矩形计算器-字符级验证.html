<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">  
  <title></title>
</head>
<title>矩形周长面积计算</title>
<style>
 .rectangle{
  text-align: center;
 }
 #rectangle__calc{
   margin-left:53px;
 }
 #s1{
  color: red;
 }
 #s2{
  color: red;
 }
 #s3{
  color: red;
 }
 #s4{
  color: red;
 }

</style>

<body>
 <div class="rectangle">
   <label for="">宽度：</label>   
   <input id="rectangle__width" type="textbox">
   <br>
   <span id="s1"   style="display: none;">请输入宽</span>
   <span id="s2"   style="display: none;">请输入大于零的数字</span>
   <br>
   <label for="">长度：</label>
   <input id="rectangle__height" type="textbox">
    <br>
   <span id="s3"   style="display: none;">请输入宽</span>
   <span id="s4"   style="display: none;">请输入大于零的数字</span>
   <input id="rectangle__calc" type="button" value="计算">
   <br>
   <label for="">周长：</label>
   <input id="rectangle__perimeter" type="textbox" disabled>
   <br>
   <label for="">面积：</label>
   <input id="rectangle__area" type="textbox" disabled>
 </div>  
</body>
<script>
  var width=document.getElementById('rectangle__width');
  var height=document.getElementById('rectangle__height');
  var down=document.getElementById('rectangle__calc');
  var perimter=document.getElementById('rectangle__perimeter');
  var area=document.getElementById('rectangle__area');
  var s1=document.getElementById('s1');
  var s2=document.getElementById('s2');
  var s3=document.getElementById('s3');
  var s4=document.getElementById('s4');
  

  //字符级验证
  //判断高
  	width.onkeydown=function(e){
  		var patrn=/^[0-9.Ee]$/;
        if (patrn.exec(e.key)||event.keyCode==8){  		 
        //console.log(e.key);
        return true;
        }else{
       	 return false;
       }      
  	}
    
  //判断宽
  	height.onkeydown=function(e){
  		var patrn=/^[0-9Ee.]$/;
        if (patrn.exec(e.key)||event.keyCode==8){  		 
        //console.log(e.key);
        return true;
        }else{
       	 return false;
       }      

  	}

  	//计算
	  down.onclick=function(){ 
      if(width.value&&height.value){
      var patrn=/^[0-9.Ee]+$/;
      var temp=0;
       if(!patrn.exec(height.value)) {
            s3.style.display='none'; 
            s4.style.display='block';
            temp++; 
         }
       if(!patrn.exec(width.value)) {
            s1.style.display='none'; 
            s2.style.display='block'; 
            temp++;            
         }
       if(temp==0){        
	       perimter.value=(width.value*10+height.value*10)*2/10;
         area.value=(width.value*10*height.value*10)/100;}
         } 
      else if(!width.value&&height.value){
         s1.style.display='block';
         var patrn=/^[0-9.Ee]+$/;
         if(!patrn.exec(height.value)){
            s3.style.display='none'; 
            s4.style.display='block';            
         }else{
          s3.style.display='none'; 
          s4.style.display='none'; 
         }   
      }
      else if(width.value && !height.value){
         s3.style.display='block'; 
          var patrn=/^[0-9.Ee]+$/;
         
          if(!patrn.exec(width.value)) {
            s1.style.display='none'; 
            s2.style.display='block';              
          }else{
          s1.style.display='none'; 
          s2.style.display='none'; 
         }   
           
      } 
      else{
        s1.style.display='block'; 
        s3.style.display='block'; 
      }
	  }
</script>
</html>
